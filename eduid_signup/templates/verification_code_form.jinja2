{% extends "templates/base.jinja2" %}

{% block contents %}

<div class="jumbotron verification-code">
    <h1>{{ _("Welcome to eduID!") }}</h1>

{% if email_already_verified is defined %}
  <p class="lead">{{ _("Email address has already been verified") }}</p>
  <p class="lead">{{ _("Maybe you want to reset your password again?") }}</p>
  <div class="row">
      <div class="col-md-12">
        <p class="text-center">
          <a class="btn btn-success btn-lg profile-link" href="{{ reset_password_link }}">
              {{ _("Reset password") }}</a>
        </p>
      </div>
  </div>

{% elif password is not defined %}

  <p class="lead">{{ _("Put here the verification code sent to you by e-mail") }}</p>

  <div class="row">
      <form class="form-horizontal" method="POST">
        <div class="form-group{% if code_does_not_exists is defined %} has-error{% endif %}">
            <input type="text" name="code" id="verification-code-input" class="form-control" placeholder="{{ _("Paste here your code") }}" value="" required autofocus />
            <button class="btn btn-success has-spinner"
                    id="verify-button"
                    type="submit"">
                    <span class="glyphicon glyphicon-refresh glyphicon-spin hidden"></span> {{ _("Verify account") }}
            </button>
            {% if code_does_not_exists is defined %}
              <p class="help-block">{{ _("The provided code does not exist") }}</p>
            {% endif %}
        </div>
      </form>
  </div>

{% else %}

  {% include "inc.registration_completed.jinja2" %}

{% endif %}

</div>

{% endblock %}

{% if email_already_verified is not defined and password is not defined %}

  {% block extrajs %}
  <script type="text/javascript">
$(function () {
    "use strict";

    $(document).ready(function () {
        $('#verify-button').click(function (e) {
            if ($('#verification-code-input').val() !== '') {
                $(this).find('span').removeClass('hidden');
            }
        });
    });

}());
  </script>
  {% endblock %}

{% endif %}
